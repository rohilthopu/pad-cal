<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pad DB</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.1/css/bulma.min.css">
    <script src="https://use.fontawesome.com/659d3027f8.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.1/css/bulma.min.css">
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment-duration-format/1.3.0/moment-duration-format.min.js"></script>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/dataTables.bulma.css' %}">
    <link rel="stylesheet" href="{% static 'css/guerrilladisplay.css' %}">
    <script type="text/javascript" src={% static 'js/dataTables.bulma.js' %}></script>
    <script type="text/javascript" src={% static 'js/monsterdetail.js' %}></script>
    <script type="text/javascript" src={% static 'js/homecontroller.js' %}></script>
</head>

<meta name="viewport" content="width=device-width, initial-scale=1">
<body>

<nav class="navbar is-dark" role="navigation">
    <div class="navbar-brand">
        <span class="navbar-burger burger" onclick="hamburgerHelper();">
            <span></span>
            <span></span>
            <span></span>
        </span>
    </div>
    <div id="navbar-menu" class="navbar-menu">
        <div class="navbar-start">
            <a class="navbar-item" href="/">Pad DB</a>
            <div class="navbar-item has-dropdown is-hoverable">
                <a class="navbar-link" href="/monsterdb/na">
                    Monsters
                </a>

                <div class="navbar-dropdown">
                    <a class="navbar-item" href="/monsterdb/na">
                        NA
                    </a>
                    <a class="navbar-item" href="/monsterdb/jp">
                        JP
                    </a>
                </div>
            </div>
            <div class="navbar-item has-dropdown is-hoverable">
                <a class="navbar-link" href="/dungeons/na">
                    Dungeons
                </a>

                <div class="navbar-dropdown">
                    <a class="navbar-item" href="/dungeons/na">
                        NA
                    </a>
                    <a class="navbar-item" href="/dungeons/jp">
                        JP
                    </a>
                </div>
            </div>
            <div class="navbar-item has-dropdown is-hoverable">
                <a class="navbar-link" href="/activeskills/na">
                    Active Skills
                </a>
                <div class="navbar-dropdown">
                    <a class="navbar-item" href="/activeskills/na">
                        NA
                    </a>
                    <a class="navbar-item" href="/activeskills/jp">
                        JP
                    </a>
                </div>
            </div>
            <div class="navbar-item has-dropdown is-hoverable">
                <a class="navbar-link" href="/leaderskills/na">
                    Leader Skills
                </a>
                <div class="navbar-dropdown">
                    <a class="navbar-item" href="/leaderskills/na">
                        NA
                    </a>
                    <a class="navbar-item" href="/leaderskills/jp">
                        JP
                    </a>
                </div>
            </div>
        </div>
    </div>
</nav>

{% block content %}
    <section class="hero is-dark" style="margin-bottom: 2%;">
        <div class="hero-body has-text-centered">
            <div class="container is-fluid">
                <h1 class="title"> Calender </h1>
                <h2 class="subtitle" style="margin-bottom: 0%"> Guerrilla Dungeons for {{ date }}</h2>
                <h2 class="subtitle is-6 is-italic" style="margin-bottom: 0%;"> Dates and Times listed are for Pacific
                    Time (UTC-8).</h2>
                <h2 class="subtitle is-6 is-italic"> Status, ETA, and Time Left are real time figures, irrespective of
                    time zones.</h2>
            </div>
        </div>
    </section>
    <nav class="breadcrumb is-centered" aria-label="breadcrumbs">
        <ul>
            <li class="is-active" id="natab"><a onclick="switchNA();">NA</a></li>
            <li id="jptab"><a onclick="switchJP();">JP</a></li>
        </ul>
    </nav>
    <div class="label has-text-centered">Dungeons are default sorted by Group</div>
    <div class="columns is-centered" style="margin-top: 2%; margin-bottom: 2%;">
        <div class="column is-four-fifths">

            <div id="na">
                <table class="table is-fullwidth is-hoverable" id="natable">
                    <thead>
                    <tr>
                        <th class="has-text-left">Dungeon</th>
                        <th class="has-text-centered">Group</th>
                        <th class="has-text-centered">Status</th>
                        <th class="has-text-centered">Time Until</th>
                        <th class="has-text-centered">Time Left</th>
                        <th class="has-text-left">Start</th>
                        <th class="has-text-left">End</th>
                        <th class="has-text-centered hide" id="nahead">Time</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for dungeon, active in na %}
                        <tr>
                            <td class="has-text-left">{{ dungeon.name }}</td>
                            <td class="has-text-centered">{{ dungeon.group }}</td>
                            <td class="has-text-centered" name="active">{{ active }}</td>
                            <td class="has-text-centered spaced" name="starttime" value="{{ dungeon.startSecs }}"></td>
                            <td class="has-text-centered spaced" name="endtime" value="{{ dungeon.endSecs }}"></td>
                            <td class="has-text-left">{{ dungeon.startTime }}</td>
                            <td class="has-text-left">{{ dungeon.endTime }}</td>
                            <td class="has-text-centered hide spaced" name="time-mobile" id="naval"></td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>


            </div>

            <div id="jp" style="display: none">
                <table class="table is-fullwidth is-hoverable" id="jptable">
                    <thead>
                    <tr>
                        <th class="has-text-left">Dungeon</th>
                        <th class="has-text-centered">Group</th>
                        <th class="has-text-centered">Status</th>
                        <th class="has-text-centered">Time Until</th>
                        <th class="has-text-centered">Time Left</th>
                        <th class="has-text-left">Start</th>
                        <th class="has-text-left">End</th>
                        <th class="has-text-centered hide spaced" id="jphead">Time</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for dungeon, active in jp %}
                        <tr>
                            <td class="has-text-left">{{ dungeon.name }}</td>
                            <td class="has-text-centered">{{ dungeon.group }}</td>
                            <td class="has-text-centered" name="active">{{ active }}</td>
                            <td class="has-text-centered spaced" name="starttime" value="{{ dungeon.startSecs }}"></td>
                            <td class="has-text-centered spaced" name="endtime" value="{{ dungeon.endSecs }}"></td>
                            <td class="has-text-left">{{ dungeon.startTime }}</td>
                            <td class="has-text-left">{{ dungeon.endTime }}</td>
                            <td class="has-text-centered hide spaced" name="time-mobile" id="jpval"></td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>

        </div>

    </div>
    <script>
        window.onload = function () {
            computeTimes();
            setInterval(computeTimes, 1000);
        };
    </script>
{% endblock %}
</body>
</html>
